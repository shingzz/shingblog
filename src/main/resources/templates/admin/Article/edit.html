<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bootstrap Dashboard</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->

    <link rel="stylesheet" th:href="@{/admin/vendor/editor.md/css/style.css}">
    <link rel="stylesheet" th:href="@{/admin/vendor/bootstrap/css/bootstrap.min.css}">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" th:href="@{/admin/vendor/font-awesome/css/font-awesome.min.css}">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" th:href="@{/admin/css/fontastic.css}">
    <!-- Google fonts - Roboto -->
    <link rel="stylesheet" href="https://fonts.font.im/css?family=Roboto:300,400,500,700">
    <!-- jQuery Circle-->
    <link rel="stylesheet" th:href="@{/admin/css/grasp_mobile_progress_circle-1.0.0.min.css}">
    <!-- Custom Scrollbar-->
    <link rel="stylesheet" th:href="@{/admin/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css}">
    <!-- theme stylesheet-->
    <link rel="stylesheet" th:href="@{/admin/css/style.default.css}" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" th:href="@{/admin/css/custom.css}">


    <link rel="stylesheet" th:href="@{/admin/vendor/editor.md/css/editormd.css}">

    <!-- Favicon-->
    <link rel="shortcut icon" th:href="@{/admin/img/favicon.ico}">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
  <body>
    <!-- Side Navbar -->
    <div th:insert="~{admin/common/commons::sidenavbar}"></div>
    <div class="page">
      <!-- navbar-->
      <div th:insert="~{admin/common/commons::headernavbar}"></div>
      <!-- Breadcrumb-->
      <div class="breadcrumb-holder">
        <div class="container-fluid">
          <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item active">Tables       </li>
          </ul>
        </div>
      </div>
      
      <section>
        <div class="container-fluid">
          <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="card">
                <div class="card-header">
                  <h4>Basic Table</h4>
                </div>
                <div class="card-body">
                  <!--
                  //-->
                    <form name="mdEditorForm" id="mdEditorForm">
                        <input type="hidden" name="articleId" th:value="${article.getArticleId()}">
                    <div class="form-group row">
                        <label class="col-sm-2 form-control-label">题目</label>
                        <div class="col-sm-10">
                            <input type="text" name="articleTitle" class="form-control" th:value="${article.getArticleTitle()}"/>
                        </div>
                    </div>
                    <div id="layout">
                          <div id="test-editormd">
                              <textarea name="articleContent" id="content" style="display:none;" th:text="${article.getArticleContent()}"></textarea>
                              <textarea class="editormd-html-textarea" name="articleHtmlContent" id="htmlContent"></textarea>
                          </div>
                    </div>
                    </form>
                  <!--markdownend-->
                </div>

              </div>
            </div>
          </div>
        </div>
      </section>
      <footer class="main-footer">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-6">
              <p>Copyright &copy; 2019.Company name All rights reserved.<a target="_blank" href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></p>
            </div>
            <div class="col-sm-6 text-right">
              
              
            </div>
          </div>
        </div>
      </footer>
    </div>
    <!-- JavaScript files-->
    <script th:src="@{/admin/vendor/jquery/jquery.min.js}"></script>
    <script th:src="@{/admin/vendor/popper.js/umd/popper.min.js}"> </script>
    <script th:src="@{/admin/vendor/bootstrap/js/bootstrap.min.js}"></script>
    <script th:src="@{/admin/js/grasp_mobile_progress_circle-1.0.0.min.js}"></script>
    <script th:src="@{/admin/vendor/jquery.cookie/jquery.cookie.js}"> </script>
    <script th:src="@{/admin/vendor/chart.js/Chart.min.js}"></script>
    <script th:src="@{/admin/vendor/jquery-validation/jquery.validate.min.js}"></script>
    <script th:src="@{/admin/js/front.js}"></script>
    <script th:src="@{/admin/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js}"></script>
    <script th:src="@{/admin/vendor/editor.md/js/jquery.min.js}"></script>
    <script th:src="@{/admin/vendor/editor.md/js/editormd.min.js}"></script>
    <script type="text/javascript">
        var testEditor;

        $(function() {
            testEditor = editormd("test-editormd", {
                width   : "90%",
                height  : 640,
                syncScrolling : "single",
                saveHTMLToTextarea : true,
                htmlDecode : "style,script,iframe|on*",
                emoji: true,
                taskList: true,
                tocm : true,                  // Using [TOCM]
                tex : true,                   // 开启科学公式TeX语言支持，默认关闭
                flowChart : true,             // 开启流程图支持，默认关闭
                sequenceDiagram : true,
                codeFold: true,
                path    : "/admin/vendor/editor.md/lib/",
                toolbarIcons : function() {
                    return ["undo", "redo", "|","bold", "italic","ucwords","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","table","datetime","hr",  "||",  "watch", "fullscreen", "preview","save", "releaseIcon", "index"]
                },

                /*自定义功能按钮，下面我自定义了2个，一个是发布，一个是返回首页*/
                toolbarIconTexts : {
                    save : "<span bgcolor=\"gray\">保存</span>",
                    releaseIcon : "<span bgcolor=\"gray\">发布</span>",
                    index : "<span bgcolor=\"red\">返回首页</span>",
                },

                /*给自定义按钮指定回调函数*/
                toolbarHandlers:{
                    save : function (){
                        SavePost()
                        // mdEditorForm.method = "post";
                        // mdEditorForm.action = "/admin/save";//提交至服务器的路径
                        // mdEditorForm.submit();
                    },
                    releaseIcon : function(cm, icon, cursor, selection) {
                        mdEditorForm.method = "post";
                        mdEditorForm.action = "/admin/edit";//提交至服务器的路径
                        mdEditorForm.submit();
                    },
                    index : function(){
                        window.location.href = '/';
                    },
                }
            });
            function SavePost () {

                $.ajax({
                    type: "post",
                    url: "/admin/save",
                    data: $('#mdEditorForm').serialize(),
                }).success(function(message) {
                    alert(message)
                }).fail(function(err){
                    console.log(err)

                })
                /*
                 或者用jquery.form.min.js提交
                 $('#registSubmit').ajaxSubmit(function(message){
                    console.log(message);
                 })
                 */
                event.preventDefault()
            }
        });

    </script>
    <!-- Main File-->

  </body>
</html>